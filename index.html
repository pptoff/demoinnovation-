<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smart Asset Demo - Full Scale</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #e5e7eb;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden; /* Hide scroll on body, scroll inside phone */
        }

        /* Phone Frame for Desktop Presentation */
        .phone-frame {
            width: 100%;
            max-width: 420px;
            height: 100vh;
            max-height: 900px;
            background: white;
            position: relative;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        @media (min-width: 768px) {
            .phone-frame {
                height: 85vh;
                border-radius: 40px;
                border: 8px solid #1f2937;
            }
        }

        /* Glass Header */
        .glass-header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0,0,0,0.05);
            z-index: 50;
        }

        /* Scrollable Content */
        .content-area {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 90px;
            background: #f8fafc;
        }
        .content-area::-webkit-scrollbar { width: 4px; }
        .content-area::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 2px; }

        /* Bottom Navigation */
        .bottom-nav {
            background: white;
            border-top: 1px solid #f1f5f9;
            box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        .nav-item.active {
            color: #2563eb;
            transform: translateY(-2px);
        }

        /* Custom Elements */
        .status-badge {
            font-size: 0.65rem;
            padding: 2px 8px;
            border-radius: 999px;
            font-weight: 600;
        }
        
        .category-pill {
            transition: all 0.2s;
        }
        .category-pill.active {
            background-color: #2563eb;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.3);
        }

        .scan-line {
            width: 100%;
            height: 2px;
            background: #ef4444;
            box-shadow: 0 0 10px #ef4444;
            animation: scanMove 2s infinite linear;
        }
        @keyframes scanMove {
            0% { transform: translateY(-100px); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(100px); opacity: 0; }
        }
    </style>
</head>
<body>

    <div class="phone-frame relative">
        
        <div class="h-6 bg-gray-900 w-full flex justify-between px-6 items-center text-[10px] text-white z-50">
            <span>09:41</span>
            <div class="flex space-x-1">
                <i class="fas fa-signal"></i>
                <i class="fas fa-wifi"></i>
                <i class="fas fa-battery-full"></i>
            </div>
        </div>

        <div id="roleSelector" class="absolute inset-0 z-[60] bg-slate-900/95 flex flex-col items-center justify-center p-6 text-center">
            <div class="w-16 h-16 bg-blue-500 rounded-2xl flex items-center justify-center text-3xl text-white mb-4 shadow-lg shadow-blue-500/50">
                <i class="fas fa-cube"></i>
            </div>
            <h1 class="text-2xl font-bold text-white mb-2">Smart Asset</h1>
            <p class="text-gray-400 text-sm mb-8">‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞<br>‡πÄ‡∏Ç‡∏ï‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢</p>
            
            <div class="space-y-3 w-full max-w-xs">
                <button onclick="switchRole('user')" class="w-full bg-white/10 hover:bg-white/20 text-white p-4 rounded-xl flex items-center backdrop-blur-sm transition border border-white/5">
                    <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center mr-3"><i class="fas fa-user"></i></div>
                    <div class="text-left">
                        <div class="font-bold text-sm">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (User)</div>
                        <div class="text-[10px] text-gray-400">‡∏¢‡∏∑‡∏°‡∏Ç‡∏≠‡∏á, ‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß, ‡∏™‡πÅ‡∏Å‡∏ô‡∏£‡∏±‡∏ö</div>
                    </div>
                </button>
                <button onclick="switchRole('staff')" class="w-full bg-white/10 hover:bg-white/20 text-white p-4 rounded-xl flex items-center backdrop-blur-sm transition border border-white/5">
                    <div class="w-10 h-10 rounded-full bg-green-500 flex items-center justify-center mr-3"><i class="fas fa-user-tie"></i></div>
                    <div class="text-left">
                        <div class="font-bold text-sm">‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà (Staff L2)</div>
                        <div class="text-[10px] text-gray-400">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥, ‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö, ‡∏Ñ‡∏∑‡∏ô‡∏Ç‡∏≠‡∏á</div>
                    </div>
                </button>
                <button onclick="switchRole('admin')" class="w-full bg-white/10 hover:bg-white/20 text-white p-4 rounded-xl flex items-center backdrop-blur-sm transition border border-white/5">
                    <div class="w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center mr-3"><i class="fas fa-shield-alt"></i></div>
                    <div class="text-left">
                        <div class="font-bold text-sm">‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö (Admin)</div>
                        <div class="text-[10px] text-gray-400">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å, ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Stock</div>
                    </div>
                </button>
                <button onclick="switchRole('executive')" class="w-full bg-white/10 hover:bg-white/20 text-white p-4 rounded-xl flex items-center backdrop-blur-sm transition border border-white/5">
                    <div class="w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center mr-3"><i class="fas fa-chart-line"></i></div>
                    <div class="text-left">
                        <div class="font-bold text-sm">‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£ (Executive)</div>
                        <div class="text-[10px] text-gray-400">Dashboard, ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</div>
                    </div>
                </button>
            </div>
            <p class="mt-8 text-xs text-gray-500">Demo Version 2.0</p>
        </div>

        <header class="glass-header px-5 py-4 flex justify-between items-center sticky top-0">
            <div>
                <h2 id="pageTitle" class="text-lg font-bold text-gray-800">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</h2>
                <p id="roleLabel" class="text-[10px] text-gray-500 bg-gray-100 px-2 py-0.5 rounded inline-block">User Mode</p>
            </div>
            <div class="flex gap-3">
                <button class="relative text-gray-400 hover:text-gray-600">
                    <i class="fas fa-bell"></i>
                    <span class="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                </button>
                <button onclick="showRoleSelector()" class="text-blue-600 bg-blue-50 w-8 h-8 rounded-full hover:bg-blue-100">
                    <i class="fas fa-exchange-alt text-xs"></i>
                </button>
            </div>
        </header>

        <main id="appContent" class="content-area p-4">
            </main>

        <nav id="bottomNav" class="bottom-nav absolute bottom-0 w-full h-16 flex justify-around items-center px-2 z-40">
            </nav>

    </div>

    <script>
        // --- DATA MOCKUP (‡πÄ‡∏¢‡∏≠‡∏∞‡πÅ‡∏•‡∏∞‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô) ---
        
        // 1. Assets Database
        const assetsDB = [
            { id: 1, name: "‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å (‡∏Ç‡∏≤‡∏ß)", category: "furniture", stock: 500, available: 120, img: "ü™ë", color: "bg-blue-100 text-blue-600" },
            { id: 2, name: "‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å (‡πÅ‡∏î‡∏á)", category: "furniture", stock: 200, available: 50, img: "ü™ë", color: "bg-red-100 text-red-600" },
            { id: 3, name: "‡πÇ‡∏ï‡πä‡∏∞‡∏û‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≤‡∏ß 1.5‡∏°.", category: "furniture", stock: 100, available: 10, img: "UTA", color: "bg-slate-100 text-slate-600" },
            { id: 4, name: "‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå‡∏ú‡πâ‡∏≤‡πÉ‡∏ö 3x3m", category: "outdoor", stock: 20, available: 0, img: "‚õ∫", color: "bg-green-100 text-green-600" },
            { id: 5, name: "‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå‡∏ú‡πâ‡∏≤‡πÉ‡∏ö 5x5m", category: "outdoor", stock: 10, available: 2, img: "üé™", color: "bg-green-100 text-green-600" },
            { id: 6, name: "‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡πÄ‡∏ï‡∏≠‡∏£‡πå Epson", category: "tech", stock: 5, available: 2, img: "üìΩÔ∏è", color: "bg-indigo-100 text-indigo-600" },
            { id: 7, name: "‡∏à‡∏≠‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏û‡∏Ç‡∏≤‡∏ï‡∏±‡πâ‡∏á 100\"", category: "tech", stock: 5, available: 3, img: "‚¨ú", color: "bg-indigo-50 text-indigo-500" },
            { id: 8, name: "‡∏ä‡∏∏‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏û‡∏Å‡∏û‡∏≤", category: "audio", stock: 8, available: 8, img: "üîä", color: "bg-purple-100 text-purple-600" },
            { id: 9, name: "‡πÑ‡∏°‡πÇ‡∏Ñ‡∏£‡πÇ‡∏ü‡∏ô‡πÑ‡∏£‡πâ‡∏™‡∏≤‡∏¢ (‡∏Ñ‡∏π‡πà)", category: "audio", stock: 10, available: 5, img: "üé§", color: "bg-pink-100 text-pink-600" },
            { id: 10, name: "‡πÑ‡∏ü‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï‡πÑ‡∏•‡∏ó‡πå LED", category: "outdoor", stock: 20, available: 15, img: "üí°", color: "bg-yellow-100 text-yellow-600" },
            { id: 11, name: "‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô‡∏û‡∏±‡∏™‡∏î‡∏∏ 4 ‡∏•‡πâ‡∏≠", category: "tool", stock: 5, available: 1, img: "üõí", color: "bg-gray-100 text-gray-600" },
            { id: 12, name: "‡∏û‡∏±‡∏î‡∏•‡∏°‡πÑ‡∏≠‡∏ô‡πâ‡∏≥‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°", category: "outdoor", stock: 10, available: 0, img: "üí®", color: "bg-cyan-100 text-cyan-600" },
            { id: 13, name: "‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå Notebook", category: "tech", stock: 15, available: 12, img: "üíª", color: "bg-blue-50 text-blue-500" },
            { id: 14, name: "‡∏ß‡∏¥‡∏ó‡∏¢‡∏∏‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£ (‡πÅ‡∏î‡∏á)", category: "tech", stock: 30, available: 28, img: "üìü", color: "bg-red-50 text-red-500" },
            { id: 15, name: "‡πÅ‡∏ú‡∏á‡∏Å‡∏±‡πâ‡∏ô‡∏à‡∏£‡∏≤‡∏à‡∏£", category: "tool", stock: 50, available: 40, img: "üöß", color: "bg-orange-100 text-orange-600" }
        ];

        // 2. User Requests (History)
        const myRequests = [
            { id: 'REQ-059', items: [{name:'‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ‡∏Ç‡∏≤‡∏ß', qty: 50}], date: '2026-02-01', status: 'approved', note: '‡∏á‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡πá‡∏Å' },
            { id: 'REQ-058', items: [{name:'‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡πÄ‡∏ï‡∏≠‡∏£‡πå', qty: 1}], date: '2026-01-28', status: 'pending', note: '‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£' },
            { id: 'REQ-040', items: [{name:'‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå 3x3', qty: 2}], date: '2026-01-15', status: 'completed', note: '‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß (‡∏õ‡∏Å‡∏ï‡∏¥)' },
            { id: 'REQ-035', items: [{name:'‡πÑ‡∏°‡πÇ‡∏Ñ‡∏£‡πÇ‡∏ü‡∏ô', qty: 2}], date: '2026-01-10', status: 'rejected', note: '‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥: ‡∏Ç‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∏‡∏î' }
        ];

        // 3. Staff Pending Tasks (Queue)
        const staffTasks = [
            { id: 'T-1024', user: '‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ (‡∏ä‡∏∏‡∏°‡∏ä‡∏ô 70 ‡πÑ‡∏£‡πà)', role: 'L1', items: '‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ‡∏Ç‡∏≤‡∏ß x 100', status: 'pending', urgent: true, conflict: false },
            { id: 'T-1025', user: '‡∏ô.‡∏™.‡πÉ‡∏à‡∏î‡∏µ (‡∏ù‡πà‡∏≤‡∏¢‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô)', role: 'L2', items: '‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡πÄ‡∏ï‡∏≠‡∏£‡πå x 1, ‡∏à‡∏≠ x 1', status: 'pending', urgent: false, conflict: false },
            { id: 'T-1026', user: '‡∏ô‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏±‡∏¢ (‡∏ù‡πà‡∏≤‡∏¢‡πÇ‡∏¢‡∏ò‡∏≤)', role: 'L2', items: '‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå 3x3 x 4', status: 'pending', urgent: false, conflict: true, warning: '‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 0 (‡∏ä‡∏ô‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏ä‡∏≤‡∏î)' }
        ];

        // 4. Admin - Registration Queue
        const newRegistrations = [
            { id: 'U-001', name: '‡∏ô‡∏≤‡∏¢ A', dept: '‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ', reqRole: 'User' },
            { id: 'U-002', name: '‡∏ô.‡∏™. B', dept: '‡∏ù‡πà‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤', reqRole: 'Staff' },
            { id: 'U-003', name: '‡∏ô‡∏≤‡∏¢ C', dept: '‡∏ù‡πà‡∏≤‡∏¢‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î', reqRole: 'Staff' }
        ];

        // --- STATE MANAGEMENT ---
        let currentRole = 'user';
        let cart = [];
        let activeCategory = 'all';

        // --- CORE FUNCTIONS ---

        function showRoleSelector() {
            document.getElementById('roleSelector').classList.remove('hidden');
            document.getElementById('roleSelector').style.display = 'flex';
        }

        function switchRole(role) {
            currentRole = role;
            document.getElementById('roleSelector').style.display = 'none';
            
            // Update UI Labels
            const labels = {
                'user': 'User Mode',
                'staff': 'Staff Mode (L2)',
                'admin': 'Admin Mode (L3)',
                'executive': 'Executive View'
            };
            document.getElementById('roleLabel').innerText = labels[role];
            
            // Render Bottom Nav
            renderBottomNav();
            
            // Render Default Page
            if(role === 'user') renderUserHome();
            else if(role === 'staff') renderStaffDashboard();
            else if(role === 'admin') renderAdminUsers();
            else if(role === 'executive') renderExecutiveDashboard();
        }

        function renderBottomNav() {
            const nav = document.getElementById('bottomNav');
            let html = '';
            
            if (currentRole === 'user') {
                html = `
                    <button onclick="renderUserHome()" class="nav-item flex flex-col items-center text-gray-400 p-2"><i class="fas fa-store mb-1"></i><span class="text-[10px]">‡∏¢‡∏∑‡∏°‡∏Ç‡∏≠‡∏á</span></button>
                    <button onclick="renderUserCart()" class="nav-item flex flex-col items-center text-gray-400 p-2 relative">
                        <i class="fas fa-shopping-basket mb-1"></i><span class="text-[10px]">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</span>
                        ${cart.length > 0 ? `<span class="absolute top-1 right-2 w-4 h-4 bg-red-500 rounded-full text-white text-[8px] flex items-center justify-center">${cart.length}</span>` : ''}
                    </button>
                    <button onclick="renderUserStatus()" class="nav-item flex flex-col items-center text-gray-400 p-2"><i class="fas fa-tasks mb-1"></i><span class="text-[10px]">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°</span></button>
                    <button onclick="renderUserProfile()" class="nav-item flex flex-col items-center text-gray-400 p-2"><i class="fas fa-user mb-1"></i><span class="text-[10px]">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</span></button>
                `;
            } else if (currentRole === 'staff') {
                html = `
                    <button onclick="renderStaffDashboard()" class="nav-item flex flex-col items-center text-gray-400 p-2"><i class="fas fa-chart-pie mb-1"></i><span class="text-[10px]">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°</span></button>
                    <button onclick="renderStaffScanner('handover')" class="nav-item flex flex-col items-center text-blue-600 p-2 -mt-6"><div class="w-14 h-14 rounded-full bg-blue-600 text-white flex items-center justify-center shadow-lg shadow-blue-500/50"><i class="fas fa-qrcode text-xl"></i></div></button>
                    <button onclick="renderStaffApprovals()" class="nav-item flex flex-col items-center text-gray-400 p-2 relative">
                        <i class="fas fa-clipboard-check mb-1"></i><span class="text-[10px]">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span>
                        <span class="absolute top-1 right-3 w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                    </button>
                `;
            } else if (currentRole === 'admin') {
                html = `
                    <button onclick="renderAdminUsers()" class="nav-item flex flex-col items-center text-gray-400 p-2"><i class="fas fa-users-cog mb-1"></i><span class="text-[10px]">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</span></button>
                    <button onclick="renderAdminStock()" class="nav-item flex flex-col items-center text-gray-400 p-2"><i class="fas fa-boxes mb-1"></i><span class="text-[10px]">‡∏Ñ‡∏•‡∏±‡∏á</span></button>
                    <button class="nav-item flex flex-col items-center text-gray-400 p-2"><i class="fas fa-history mb-1"></i><span class="text-[10px]">Logs</span></button>
                `;
            } else if (currentRole === 'executive') {
                html = `
                    <button onclick="renderExecutiveDashboard()" class="nav-item flex flex-col items-center text-gray-400 p-2"><i class="fas fa-chart-line mb-1"></i><span class="text-[10px]">Dashboard</span></button>
                    <button class="nav-item flex flex-col items-center text-gray-400 p-2"><i class="fas fa-file-invoice-dollar mb-1"></i><span class="text-[10px]">‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</span></button>
                `;
            }
            nav.innerHTML = html;
        }

        // --- USER VIEWS ---
        
        function filterAssets(category) {
            activeCategory = category;
            renderUserHome();
        }

        function renderUserHome() {
            document.getElementById('pageTitle').innerText = '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏™‡∏î‡∏∏';
            const content = document.getElementById('appContent');
            
            // Category Filter HTML
            const categories = [
                {id: 'all', name: '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'},
                {id: 'furniture', name: '‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå'},
                {id: 'tech', name: '‡πÑ‡∏≠‡∏ó‡∏µ/‡∏†‡∏≤‡∏û‡πÄ‡∏™‡∏µ‡∏¢‡∏á'},
                {id: 'outdoor', name: '‡∏†‡∏≤‡∏Ñ‡∏™‡∏ô‡∏≤‡∏°'},
                {id: 'audio', name: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á'}
            ];
            
            let filterHtml = `<div class="flex overflow-x-auto gap-2 mb-4 pb-2 no-scrollbar">`;
            categories.forEach(c => {
                filterHtml += `<button onclick="filterAssets('${c.id}')" class="category-pill px-4 py-1.5 rounded-full text-xs font-medium whitespace-nowrap ${activeCategory === c.id ? 'active' : 'bg-white text-gray-600 border border-gray-200'}">${c.name}</button>`;
            });
            filterHtml += `</div>`;

            // Assets Grid HTML
            let assetsHtml = `<div class="grid grid-cols-2 gap-3 pb-20">`;
            const filtered = activeCategory === 'all' ? assetsDB : assetsDB.filter(a => a.category === activeCategory);
            
            filtered.forEach(item => {
                const isOut = item.available === 0;
                assetsHtml += `
                    <div class="bg-white rounded-xl p-3 shadow-sm border border-gray-100 flex flex-col h-full relative overflow-hidden group">
                        ${isOut ? '<div class="absolute inset-0 bg-white/60 z-10 flex items-center justify-center"><span class="bg-red-500 text-white text-xs px-2 py-1 rounded font-bold transform -rotate-12">‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏î</span></div>' : ''}
                        <div class="h-20 ${item.color} rounded-lg flex items-center justify-center text-3xl mb-3 group-hover:scale-105 transition-transform">
                            ${item.img}
                        </div>
                        <h3 class="text-sm font-bold text-gray-800 line-clamp-1">${item.name}</h3>
                        <div class="flex justify-between items-end mt-auto pt-2">
                            <div class="text-xs text-gray-500">‡∏ß‡πà‡∏≤‡∏á ${item.available}</div>
                            <button onclick="addToCart(${item.id})" ${isOut ? 'disabled' : ''} class="w-8 h-8 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center hover:bg-blue-600 hover:text-white transition shadow-sm">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            assetsHtml += `</div>`;

            content.innerHTML = filterHtml + assetsHtml;
        }

        function addToCart(id) {
            const item = assetsDB.find(a => a.id === id);
            cart.push(item);
            renderBottomNav();
            
            const Toast = Swal.mixin({
                toast: true, position: 'top-end', showConfirmButton: false, timer: 1500
            });
            Toast.fire({ icon: 'success', title: '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß' });
        }

        function renderUserCart() {
            document.getElementById('pageTitle').innerText = '‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô';
            const content = document.getElementById('appContent');
            
            if(cart.length === 0) {
                content.innerHTML = `<div class="h-full flex flex-col items-center justify-center text-gray-400"><i class="fas fa-shopping-basket text-4xl mb-2"></i><p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p></div>`;
                return;
            }

            let html = `<div class="bg-white rounded-xl shadow-sm p-4 mb-4">
                <h3 class="font-bold text-gray-700 mb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°</h3>
                <div class="space-y-3">
                    <div>
                        <label class="text-xs text-gray-500 block mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á</label>
                        <input type="datetime-local" class="w-full bg-gray-50 border border-gray-200 rounded p-2 text-sm">
                    </div>
                    <div>
                        <label class="text-xs text-gray-500 block mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô‡∏Ç‡∏≠‡∏á</label>
                        <input type="datetime-local" class="w-full bg-gray-50 border border-gray-200 rounded p-2 text-sm">
                    </div>
                    <div>
                        <label class="text-xs text-gray-500 block mb-1">‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå</label>
                        <textarea class="w-full bg-gray-50 border border-gray-200 rounded p-2 text-sm" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÉ‡∏ä‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°..."></textarea>
                    </div>
                </div>
            </div>
            
            <h3 class="font-bold text-gray-700 mb-2 px-1">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (${cart.length})</h3>
            <div class="space-y-2 mb-20">`;

            cart.forEach((item, idx) => {
                html += `
                    <div class="bg-white p-3 rounded-xl shadow-sm flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-10 h-10 ${item.color} rounded-lg flex items-center justify-center mr-3">${item.img}</div>
                            <div>
                                <div class="text-sm font-bold">${item.name}</div>
                                <div class="text-xs text-gray-500">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: 1</div>
                            </div>
                        </div>
                        <button onclick="cart.splice(${idx},1); renderUserCart(); renderBottomNav();" class="text-red-400 px-2"><i class="fas fa-trash"></i></button>
                    </div>
                `;
            });
            
            html += `</div>
            <div class="fixed bottom-16 left-0 w-full bg-white p-4 border-t border-gray-100 z-30">
                <button onclick="confirmRequest()" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold shadow-lg shadow-blue-500/30">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°</button>
            </div>`;
            
            content.innerHTML = html;
        }

        function confirmRequest() {
            Swal.fire({
                title: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏Ç‡∏≠?',
                text: "‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏•‡∏ú‡πà‡∏≤‡∏ô LINE",
                icon: 'question',
                showCancelButton: true,
                confirmButtonColor: '#2563eb',
                confirmButtonText: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô',
                cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
            }).then((result) => {
                if (result.isConfirmed) {
                    cart = [];
                    renderBottomNav();
                    myRequests.unshift({ id: 'REQ-NEW', items: [{name: '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà...', qty: '...'}], date: 'Now', status: 'pending', note: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö' });
                    renderUserStatus();
                    Swal.fire('‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
                }
            });
        }

        function renderUserStatus() {
            document.getElementById('pageTitle').innerText = '‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞';
            const content = document.getElementById('appContent');
            
            let html = `<div class="space-y-3 pb-20">`;
            myRequests.forEach(req => {
                let statusClass = '';
                let statusText = '';
                let actionBtn = '';

                if(req.status === 'approved') {
                    statusClass = 'bg-green-100 text-green-700';
                    statusText = '‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß';
                    actionBtn = `<button onclick="simulateScan('user')" class="w-full mt-3 bg-green-500 text-white py-2 rounded-lg text-sm font-bold shadow-sm hover:bg-green-600"><i class="fas fa-qrcode mr-1"></i> ‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á</button>`;
                } else if(req.status === 'pending') {
                    statusClass = 'bg-orange-100 text-orange-700';
                    statusText = '‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö';
                } else if(req.status === 'completed') {
                    statusClass = 'bg-gray-100 text-gray-600';
                    statusText = '‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
                } else if(req.status === 'rejected') {
                    statusClass = 'bg-red-100 text-red-600';
                    statusText = '‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥';
                }

                html += `
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <span class="text-xs font-bold text-gray-500 block">ID: ${req.id}</span>
                                <span class="text-[10px] text-gray-400">${req.date}</span>
                            </div>
                            <span class="status-badge ${statusClass}">${statusText}</span>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-2 text-sm mb-2">
                            ${req.items.map(i => `<div class="flex justify-between"><span>${i.name}</span><span class="font-mono">x${i.qty}</span></div>`).join('')}
                        </div>
                        <p class="text-xs text-gray-500"><i class="fas fa-info-circle mr-1"></i> ${req.note}</p>
                        ${actionBtn}
                    </div>
                `;
            });
            html += `</div>`;
            content.innerHTML = html;
        }

        function renderUserProfile() {
            const content = document.getElementById('appContent');
            content.innerHTML = `
                <div class="bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-6 text-white text-center mb-6 shadow-lg shadow-blue-500/30">
                    <div class="w-20 h-20 bg-white rounded-full mx-auto mb-3 p-1">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" class="rounded-full w-full h-full">
                    </div>
                    <h2 class="text-xl font-bold">‡∏ô‡∏≤‡∏¢‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏µ</h2>
                    <p class="text-blue-100 text-sm">‡∏ù‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</p>
                    <div class="flex justify-center gap-4 mt-4">
                        <div class="bg-white/20 rounded px-3 py-1 text-xs">Credit: A</div>
                        <div class="bg-white/20 rounded px-3 py-1 text-xs">Points: 120</div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                    <div class="p-4 border-b border-gray-100 flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-700">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</span>
                        <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
                    </div>
                    <div class="p-4 border-b border-gray-100 flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-700">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
                        <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
                    </div>
                    <div class="p-4 flex items-center justify-between text-red-500">
                        <span class="text-sm font-medium">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
                        <i class="fas fa-sign-out-alt text-xs"></i>
                    </div>
                </div>
            `;
        }

        // --- STAFF VIEWS ---

        function renderStaffDashboard() {
            document.getElementById('pageTitle').innerText = '‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏™‡∏î‡∏∏';
            const content = document.getElementById('appContent');
            content.innerHTML = `
                <div class="grid grid-cols-2 gap-3 mb-4">
                    <div class="bg-blue-600 text-white p-4 rounded-xl shadow-lg shadow-blue-500/30">
                        <div class="text-3xl font-bold">12</div>
                        <div class="text-xs opacity-80">‡∏£‡∏≠‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
                    </div>
                    <div class="bg-orange-500 text-white p-4 rounded-xl shadow-lg shadow-orange-500/30">
                        <div class="text-3xl font-bold">5</div>
                        <div class="text-xs opacity-80">‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∑‡∏ô</div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm p-4 mb-4 border border-gray-100">
                    <h3 class="font-bold text-gray-700 mb-3 flex items-center"><i class="fas fa-exclamation-circle text-orange-500 mr-2"></i> ‡∏Ç‡∏≠‡∏á‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î‡∏™‡∏ï‡πá‡∏≠‡∏Å</h3>
                    <div class="space-y-3">
                        ${assetsDB.filter(a => a.available <= 2).map(a => `
                            <div class="flex items-center justify-between text-sm">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 ${a.available===0?'bg-red-500':'bg-orange-400'} rounded-full mr-2"></span>
                                    <span class="text-gray-600">${a.name}</span>
                                </div>
                                <span class="font-mono font-bold text-gray-800">${a.available}/${a.stock}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm p-4 border border-gray-100">
                    <h3 class="font-bold text-gray-700 mb-3">‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πà‡∏ß‡∏ô</h3>
                    <div class="grid grid-cols-4 gap-2 text-center">
                        <div onclick="renderStaffScanner('handover')" class="bg-gray-50 p-2 rounded-lg cursor-pointer hover:bg-blue-50">
                            <i class="fas fa-box-open text-blue-500 text-xl mb-1"></i>
                            <div class="text-[10px]">‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á</div>
                        </div>
                        <div onclick="renderStaffScanner('return')" class="bg-gray-50 p-2 rounded-lg cursor-pointer hover:bg-green-50">
                            <i class="fas fa-undo text-green-500 text-xl mb-1"></i>
                            <div class="text-[10px]">‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô</div>
                        </div>
                        <div class="bg-gray-50 p-2 rounded-lg cursor-pointer hover:bg-orange-50">
                            <i class="fas fa-wrench text-orange-500 text-xl mb-1"></i>
                            <div class="text-[10px]">‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°</div>
                        </div>
                        <div class="bg-gray-50 p-2 rounded-lg cursor-pointer hover:bg-purple-50">
                            <i class="fas fa-search text-purple-500 text-xl mb-1"></i>
                            <div class="text-[10px]">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderStaffApprovals() {
            document.getElementById('pageTitle').innerText = '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥';
            const content = document.getElementById('appContent');
            
            let html = `<div class="space-y-3 pb-20">`;
            staffTasks.forEach((task, idx) => {
                html += `
                    <div class="bg-white p-4 rounded-xl shadow-sm border-l-4 ${task.conflict ? 'border-red-500' : (task.urgent ? 'border-orange-500' : 'border-blue-500')} animate__animated animate__fadeInLeft" style="animation-delay: ${idx * 0.1}s">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <h4 class="font-bold text-gray-800 text-sm">${task.user}</h4>
                                <span class="text-[10px] text-gray-500 bg-gray-100 px-1 rounded">Role: ${task.role}</span>
                            </div>
                            <div class="text-right">
                                ${task.urgent ? '<span class="text-[10px] bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full font-bold">‡∏î‡πà‡∏ß‡∏ô</span>' : ''}
                                ${task.conflict ? '<span class="text-[10px] bg-red-100 text-red-600 px-2 py-0.5 rounded-full font-bold block mt-1">Double Booking</span>' : ''}
                            </div>
                        </div>
                        <div class="bg-gray-50 p-2 rounded text-sm text-gray-700 mb-2">
                            ${task.items}
                        </div>
                        ${task.warning ? `<p class="text-xs text-red-500 mb-2"><i class="fas fa-exclamation-triangle mr-1"></i> ${task.warning}</p>` : ''}
                        
                        <div class="flex gap-2 mt-2">
                            <button onclick="Swal.fire('‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß', '', 'success').then(() => {staffTasks.splice(${idx},1); renderStaffApprovals();})" class="flex-1 bg-green-500 text-white py-1.5 rounded-lg text-xs font-bold shadow-sm">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button>
                            ${task.conflict ? 
                                `<button onclick="Swal.fire('‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏á‡πÄ‡∏ß‡∏•‡∏≤', '‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏≤‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡∏°...', 'info')" class="flex-1 bg-yellow-500 text-white py-1.5 rounded-lg text-xs font-bold shadow-sm">‡πÄ‡∏à‡∏£‡∏à‡∏≤</button>` : 
                                `<button class="flex-1 bg-gray-100 text-gray-600 py-1.5 rounded-lg text-xs font-bold">‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò</button>`
                            }
                        </div>
                    </div>
                `;
            });
            html += `</div>`;
            content.innerHTML = html;
        }

        function renderStaffScanner(mode = 'handover') {
            document.getElementById('pageTitle').innerText = mode === 'handover' ? '‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö' : '‡∏™‡πÅ‡∏Å‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô';
            const content = document.getElementById('appContent');
            content.innerHTML = `
                <div class="flex flex-col h-full">
                    <div class="flex-1 bg-black rounded-2xl relative overflow-hidden mb-4 group cursor-pointer" onclick="simulateScan('staff', '${mode}')">
                        <div class="absolute inset-0 bg-cover bg-center opacity-40" style="background-image: url('https://images.unsplash.com/photo-1550751827-4bd374c3f58b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80');"></div>
                        
                        <div class="absolute inset-0 flex items-center justify-center z-10">
                            <div class="w-64 h-64 border-2 border-white/50 rounded-xl relative">
                                <div class="absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-green-500 -mt-1 -ml-1"></div>
                                <div class="absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-green-500 -mt-1 -mr-1"></div>
                                <div class="absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-green-500 -mb-1 -ml-1"></div>
                                <div class="absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-green-500 -mb-1 -mr-1"></div>
                                <div class="scan-line"></div>
                            </div>
                        </div>
                        
                        <div class="absolute bottom-8 left-0 w-full text-center text-white z-20">
                            <p class="font-bold text-lg mb-1 animate-pulse">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ QR Code...</p>
                            <p class="text-xs text-white/70">‡πÅ‡∏ï‡∏∞‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô</p>
                        </div>
                    </div>

                    <div class="bg-white p-4 rounded-xl shadow-sm">
                        <h4 class="text-xs font-bold text-gray-500 mb-2 uppercase">‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç Token</h4>
                        <div class="flex gap-2">
                            <input type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô ALU-001" class="flex-1 bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm">
                            <button class="bg-gray-800 text-white px-4 py-2 rounded-lg text-sm font-bold">‡∏ï‡∏Å‡∏•‡∏á</button>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- ADMIN VIEWS ---
        function renderAdminUsers() {
            document.getElementById('pageTitle').innerText = '‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà';
            const content = document.getElementById('appContent');
            
            let html = `<div class="space-y-3 pb-20"><h3 class="text-xs font-bold text-gray-500 uppercase px-1">‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Registration)</h3>`;
            
            newRegistrations.forEach((u, idx) => {
                html += `
                    <div class="bg-white p-4 rounded-xl shadow-sm flex items-center justify-between">
                        <div>
                            <div class="font-bold text-gray-800">${u.name}</div>
                            <div class="text-xs text-gray-500">${u.dept}</div>
                            <div class="text-[10px] mt-1 bg-purple-50 text-purple-600 inline-block px-1.5 rounded">‡∏Ç‡∏≠‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå: ${u.reqRole}</div>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="newRegistrations.splice(${idx},1); renderAdminUsers();" class="w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center hover:bg-green-500 hover:text-white transition"><i class="fas fa-check"></i></button>
                            <button class="w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center hover:bg-red-500 hover:text-white transition"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                `;
            });
            html += `</div>`;
            content.innerHTML = html;
        }
        
        function renderAdminStock() {
            document.getElementById('pageTitle').innerText = '‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏±‡∏á';
            renderUserHome(); // Reuse User view but pretend it has edit buttons
            // In real app, add edit buttons here
        }

        // --- EXECUTIVE VIEWS ---
        function renderExecutiveDashboard() {
            document.getElementById('pageTitle').innerText = 'Executive Dashboard';
            const content = document.getElementById('appContent');
            
            content.innerHTML = `
                <div class="bg-gradient-to-r from-gray-900 to-gray-800 text-white p-5 rounded-2xl shadow-xl mb-4">
                    <h3 class="text-sm font-bold text-gray-400 mb-1">‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏õ‡∏µ 2569</h3>
                    <div class="text-3xl font-bold mb-4">‡∏ø 1,250,000</div>
                    
                    <div class="space-y-3">
                        <div>
                            <div class="flex justify-between text-xs mb-1">
                                <span>‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏î‡πÅ‡∏ó‡∏ô (Used)</span>
                                <span>45%</span>
                            </div>
                            <div class="h-2 bg-gray-700 rounded-full overflow-hidden">
                                <div class="h-full bg-blue-500 w-[45%]"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs mb-1">
                                <span>‡∏ã‡πà‡∏≠‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á (Used)</span>
                                <span>70%</span>
                            </div>
                            <div class="h-2 bg-gray-700 rounded-full overflow-hidden">
                                <div class="h-full bg-orange-500 w-[70%]"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 mb-4">
                    <h3 class="font-bold text-gray-800 mb-4">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h3>
                    <div class="flex items-end justify-between h-32 px-2 gap-2">
                        <div class="w-full bg-blue-100 rounded-t-lg relative group h-[60%] hover:bg-blue-200 transition-all">
                            <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs font-bold text-blue-600 opacity-0 group-hover:opacity-100">3.8</div>
                            <div class="absolute bottom-1 left-1/2 transform -translate-x-1/2 text-[10px] text-gray-500">‡∏ï.‡∏Ñ.</div>
                        </div>
                        <div class="w-full bg-blue-100 rounded-t-lg relative group h-[75%] hover:bg-blue-200 transition-all">
                            <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs font-bold text-blue-600 opacity-0 group-hover:opacity-100">4.2</div>
                            <div class="absolute bottom-1 left-1/2 transform -translate-x-1/2 text-[10px] text-gray-500">‡∏û.‡∏¢.</div>
                        </div>
                        <div class="w-full bg-blue-500 rounded-t-lg relative group h-[90%] shadow-lg shadow-blue-500/30">
                             <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs font-bold text-blue-600">4.8</div>
                            <div class="absolute bottom-1 left-1/2 transform -translate-x-1/2 text-[10px] text-white">‡∏ò.‡∏Ñ.</div>
                        </div>
                        <div class="w-full bg-blue-100 rounded-t-lg relative group h-[85%] hover:bg-blue-200 transition-all">
                            <div class="absolute bottom-1 left-1/2 transform -translate-x-1/2 text-[10px] text-gray-500">‡∏°.‡∏Ñ.</div>
                        </div>
                    </div>
                </div>

                <h3 class="font-bold text-gray-800 mb-2 px-1">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°</h3>
                <div class="grid grid-cols-2 gap-3 pb-20">
                    <div class="bg-white p-3 rounded-xl shadow-sm flex items-center border border-gray-100">
                        <div class="w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mr-3"><i class="fas fa-chair"></i></div>
                        <div>
                            <div class="text-xs text-gray-500">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 1</div>
                            <div class="font-bold text-sm">‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ</div>
                        </div>
                    </div>
                    <div class="bg-white p-3 rounded-xl shadow-sm flex items-center border border-gray-100">
                        <div class="w-10 h-10 rounded-full bg-green-100 text-green-600 flex items-center justify-center mr-3"><i class="fas fa-campground"></i></div>
                        <div>
                            <div class="text-xs text-gray-500">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 2</div>
                            <div class="font-bold text-sm">‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå</div>
                        </div>
                    </div>
                </div>
            `;
        }


        // --- HELPER FUNCTIONS ---

        function simulateScan(role, mode) {
            Swal.fire({
                title: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πÅ‡∏Å‡∏ô...',
                html: '‡∏ß‡∏≤‡∏á QR Code ‡∏´‡∏£‡∏∑‡∏≠ Physical Token ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö',
                timer: 2000,
                timerProgressBar: true,
                didOpen: () => Swal.showLoading()
            }).then(() => {
                if (role === 'user') {
                    Swal.fire({
                        icon: 'success',
                        title: '‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                        text: '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤: 10:30 ‡∏ô. | ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö: ‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢'
                    });
                } else if (role === 'staff') {
                    if (mode === 'handover') {
                        Swal.fire({
                            title: 'Token: ALU-001',
                            html: '<div class="text-left bg-gray-50 p-3 rounded text-sm mb-3"><b>‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡∏°:</b> ‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢<br><b>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:</b> ‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ x 100<br><b>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</b> ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</div>',
                            confirmButtonText: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö',
                            confirmButtonColor: '#2563eb'
                        }).then((res) => {
                            if(res.isConfirmed) Swal.fire('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '', 'success');
                        });
                    } else {
                        Swal.fire({
                            title: 'Hard QR: P-1025',
                            html: '<div class="text-left bg-gray-50 p-3 rounded text-sm mb-3"><b>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</b> ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡πÄ‡∏ï‡∏≠‡∏£‡πå Epson<br><b>‡∏™‡∏†‡∏≤‡∏û:</b> ‡∏õ‡∏Å‡∏ï‡∏¥<br><b>‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</b> ‡∏ô.‡∏™.‡πÉ‡∏à‡∏î‡∏µ</div>',
                            confirmButtonText: '‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏•‡∏±‡∏á',
                            confirmButtonColor: '#22c55e',
                            showDenyButton: true,
                            denyButtonText: '‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∏‡∏î',
                            denyButtonColor: '#ef4444'
                        }).then((res) => {
                            if(res.isConfirmed) Swal.fire('‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'Stock +1', 'success');
                            else if(res.isDenied) Swal.fire('‡πÄ‡∏õ‡∏¥‡∏î Ticket ‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°', '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß', 'info');
                        });
                    }
                }
            });
        }

    </script>
</body>
</html>
